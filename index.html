<!DOCTYPE html>
<html lang="ka">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Solana MEV Bot Dashboard - რეალური დროის არბიტრაჟის შესაძლებლობები და ტრანზაქციების მონიტორინგი">
  <title>Solana MEV Dashboard - ოპტიმიზებული</title>
  
  <!-- Critical CSS inline for faster rendering -->
  <style>
    :root { --glass-opacity: 0.1; }
    body { background-color: #0f172a; color: #e2e8f0; font-family: 'Inter', sans-serif; }
    .glass { background-color: rgba(255, 255, 255, var(--glass-opacity)); backdrop-filter: blur(10px); }
    .price-up { color: #10b981; }
    .price-down { color: #ef4444; }
  </style>
  
  <!-- Preload critical resources -->
  <link rel="preload" href="performance.js" as="script">
  <link rel="preload" href="styles.css" as="style">
  
  <!-- Preconnect to important domains -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Deferred non-critical CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="styles.css">
  
  <!-- Deferred font loading -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
  
  <!-- Performance optimization script -->
  <script src="performance.js"></script>
  
  <!-- ინტერაქტიული გრაფიკებისთვის -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js" defer></script>
  
  <!-- Solana Wallet Integration -->
  <script src="wallet-connect.js" defer></script>
  <script src="jupiter-api.js" defer></script>
  <script src="solana-services.js" defer></script>
  
  <!-- Added CSS for wallet and trading UI -->
  <style>
    .wallet-connected.hidden, .wallet-not-connected.hidden {
      display: none !important;
    }
    
    /* Notification styling */
    #notification-container {
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 50;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .notification {
      padding: 12px 16px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      background: rgba(30, 41, 59, 0.8);
      backdrop-filter: blur(8px);
      transform: translateX(0);
      opacity: 1;
      transition: all 0.3s ease;
    }
    
    .notification.fade-out {
      transform: translateX(100%);
      opacity: 0;
    }
    
    /* Trade button styles */
    .trade-btn {
      font-size: 0.75rem;
      padding: 0.25rem 0.5rem;
      background: rgba(139, 92, 246, 0.3);
      color: rgb(216, 180, 254);
      border: 1px solid rgba(139, 92, 246, 0.5);
      border-radius: 4px;
      transition: all 0.2s;
    }
    
    .trade-btn:hover:not(:disabled) {
      background: rgba(139, 92, 246, 0.5);
      transform: translateY(-1px);
    }
    
    .trade-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .real-time-indicator {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 0.75rem;
      color: #10b981;
    }
    
    .real-time-indicator .pulse {
      height: 8px;
      width: 8px;
      background-color: #10b981;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% {
        opacity: 0.5;
        transform: scale(0.8);
      }
      50% {
        opacity: 1;
        transform: scale(1);
      }
      100% {
        opacity: 0.5;
        transform: scale(0.8);
      }
    }
  </style>
  
  <!-- Trading Dashboard CSS -->
  <style>
    /* Form inputs for trading dashboard */
    .form-input {
      background-color: rgba(30, 30, 46, 0.6);
      border: 1px solid rgba(100, 100, 120, 0.3);
      border-radius: 0.25rem;
      color: #e6e6e6;
      padding: 0.5rem;
      width: 100%;
      transition: border-color 0.2s;
    }
    
    .form-input:focus {
      border-color: #bb86fc;
      outline: none;
    }
    
    /* Switch toggle for network selection */
    .switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 24px;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(60, 60, 80, 0.6);
      transition: .4s;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: #e6e6e6;
      transition: .4s;
    }
    
    input:checked + .slider {
      background-color: #bb86fc;
    }
    
    input:checked + .slider:before {
      transform: translateX(24px);
    }
    
    .slider.round {
      border-radius: 24px;
    }
    
    .slider.round:before {
      border-radius: 50%;
    }
    
    /* Status indicators */
    .status-active {
      color: #69f0ae;
      font-weight: 500;
    }
    
    .status-inactive {
      color: #ff7597;
      font-weight: 500;
    }
    
    /* Glass inner elements */
    .glass-inner {
      background-color: rgba(30, 30, 46, 0.3);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(100, 100, 120, 0.1);
    }
    
    /* Buttons */
    .btn-primary {
      background-color: #bb86fc;
      color: #1a1a2e;
      border-radius: 0.25rem;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .btn-primary:hover {
      background-color: #a066fb;
    }
    
    .btn-primary:disabled {
      background-color: #6b4a8a;
      cursor: not-allowed;
    }
    
    .btn-secondary {
      background-color: rgba(80, 80, 100, 0.3);
      color: #e6e6e6;
      border: 1px solid rgba(100, 100, 120, 0.3);
      border-radius: 0.25rem;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .btn-secondary:hover:not(:disabled) {
      background-color: rgba(100, 100, 120, 0.4);
    }
    
    .btn-secondary:disabled {
      color: #888;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <!-- Animated background grid effect -->
  <div class="background-grid">
    <div class="grid-overlay"></div>
  </div>
  
  <div class="container mx-auto my-8 px-4 relative z-10">
    <!-- Dashboard Header -->
    <header class="mb-8">
      <div class="flex justify-between items-center flex-wrap gap-4">
        <div>
          <h1 class="text-2xl font-bold mb-1">Solana MEV Dashboard</h1>
          <div class="text-sm text-gray-400">
            <span class="text-sm">დრო: <span id="current-time">2025-04-06 13:17:15</span></span>
          </div>
        </div>
        
        <div class="flex items-center gap-4">
          <!-- Wallet Connection Status -->
          <div id="wallet-status" class="hidden wallet-connected bg-green-900/30 text-green-400 px-3 py-1 rounded-md">
            <div class="flex items-center gap-2">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
              </svg>
              <span id="wallet-address">დაკავშირებული</span>
            </div>
          </div>
          
          <!-- Wallet Balance -->
          <div id="wallet-balance-container" class="hidden wallet-connected px-3 py-1 bg-blue-900/30 text-blue-400 rounded-md">
            <span id="wallet-balance">0.0</span> SOL
          </div>
          
          <!-- Connect Button -->
          <div id="connect-wallet-container">
            <button id="connect-wallet" class="btn-neo wallet-not-connected">
              <span><img src="https://phantom.app/favicon.ico" class="w-4 h-4 inline-block mr-2" /> Phantom დაკავშირება</span>
            </button>
            <button id="disconnect-wallet" class="btn-neo hidden wallet-connected bg-purple-700 hover:bg-purple-800">
              <span>გამოერთება</span>
            </button>
          </div>
        </div>
      </div>
    </header>
    
    <div class="dashboard-grid">
      <!-- Sidebar -->
      <div class="dashboard-sidebar">
        <!-- Balance Card -->
        <div class="glass p-4 rounded-lg mb-6">
          <h2 class="text-lg font-medium mb-4">
            არბიტრაჟის შესაძლებლობები
            <span class="real-time-indicator ml-2">
              <span class="pulse"></span> 2 წამში ერთხელ
            </span>
          </h2>
          
          <div id="opportunities-container" class="space-y-3">
            <!-- Loading placeholder -->
            <div class="glass p-3 rounded-lg text-center py-6 animate-pulse" id="opportunities-loading">
              <div class="text-sm text-gray-400">იტვირთება არბიტრაჟის შესაძლებლობები...</div>
            </div>
            
            <!-- Opportunity template (will be cloned by JS) -->
            <div id="opportunity-template" class="glass p-3 rounded-lg opportunity-item hidden">
              <div class="flex justify-between items-start mb-2">
                <span class="text-xs px-2 py-0.5 rounded border opportunity-type">მარტივი</span>
                <span class="text-green-400 text-sm opportunity-profit">+1.8%</span>
              </div>
              <div class="opportunity-details mb-2">
                <div class="flex justify-between mb-1 text-xs">
                  <span>მიმდინარე: SOL → USDC</span>
                  <span class="text-gray-400">$0.14 მოგება</span>
                </div>
                <div class="flex justify-between text-xs text-gray-400">
                  <span>ყიდვა: Jupiter @ 47.21</span>
                  <span>გაყიდვა: Raydium @ 48.10</span>
                </div>
              </div>
              <div class="flex justify-between items-center">
                <div class="text-xs text-green-500 font-medium">შესრულების დრო: ~500ms</div>
                <button class="trade-btn execute-opportunity" data-wallet-required>შესრულება</button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Price Card -->
        <div class="glass p-4 rounded-lg mb-6">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-medium">ფასები</h2>
            <div class="text-xs text-gray-400">ბოლო განახლება 30 წმ წინ</div>
          </div>
          
          <table class="w-full">
            <tbody id="price-table-body">
              <!-- Prices will be dynamically inserted by JavaScript -->
            </tbody>
          </table>
        </div>
        
        <!-- Token Prices Card -->
        <div class="glass p-4 rounded-lg mb-6">
          <h2 class="text-lg font-medium mb-2 flex justify-between items-center">
            Token Prices
            <span class="real-time-indicator">
              <span class="pulse"></span> ცოცხალი
            </span>
          </h2>
          <div class="overflow-auto max-h-80">
            <table class="w-full text-sm" id="token-prices-table">
              <thead>
                <tr class="text-gray-400 border-b border-gray-700">
                  <th class="text-left pb-2">ტოკენი</th>
                  <th class="text-right pb-2">ფასი (USD)</th>
                  <th class="text-right pb-2">24სთ ცვლილება</th>
                </tr>
              </thead>
              <tbody id="token-prices-body">
                <tr class="animate-pulse">
                  <td colspan="3" class="text-center py-4 text-gray-400">Loading token prices from Jupiter...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        
        <!-- Auto Trading Card -->
        <div class="glass p-4 rounded-lg mb-6">
          <h2 class="text-lg font-medium mb-2">ავტომატიზაცია</h2>
          <div class="flex items-center">
            არბიტრაჟის შესაძლებლობები
            <span class="real-time-indicator ml-2">
              <span class="pulse"></span> 2 წამში ერთხელ
            </span>
          </div>
        </div>
        
        <!-- Wallet Integration Section -->
        <div class="glass p-4 rounded-lg mb-6">
          <h2 class="text-lg font-medium mb-2">საფულე</h2>
          <div class="flex flex-col gap-2">
            <div id="wallet-connect-container">
              <button id="connect-wallet" class="btn-neo py-2 px-4 mr-2">
                <i class="fas fa-wallet mr-2"></i> დააკავშირე საფულე
              </button>
              <button id="disconnect-wallet" class="btn-neo py-2 px-4 hidden">
                <i class="fas fa-sign-out-alt mr-2"></i> გათიშვა
              </button>
            </div>
            <div id="wallet-info" class="hidden">
              <div class="flex items-center gap-2 text-sm">
                <span class="text-gray-400">მისამართი:</span>
                <span id="wallet-address" class="font-mono text-xs break-all"></span>
              </div>
              <div class="flex items-center gap-2 mt-1">
                <span class="text-gray-400">ბალანსი:</span>
                <span id="total-balance" class="font-medium">0 SOL</span>
                <span id="profit-indicator" class="text-xs text-green-400 ml-2"></span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Token Prices Section - New -->
        <div class="glass p-4 rounded-lg mb-6">
          <h2 class="text-lg font-medium mb-2 flex justify-between">
            Token Prices
            <span class="text-xs text-gray-400">
              განახლდა: <span id="last-update-time">-</span>
              <span class="animate-pulse mx-1">●</span>
            </span>
          </h2>
          <div class="overflow-y-auto max-h-80">
            <table class="w-full text-sm">
              <thead>
                <tr class="text-gray-400 border-b border-gray-700">
                  <th class="text-left pb-2">ტოკენი</th>
                  <th class="text-right pb-2">ფასი (USD)</th>
                  <th class="text-right pb-2">24სთ ცვლილება</th>
                </tr>
              </thead>
              <tbody id="token-prices-body">
                <tr>
                  <td colspan="3" class="text-center py-4 text-gray-400">
                    <div class="animate-pulse">Loading token prices from Jupiter...</div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        
        <!-- Trading Dashboard Section - New -->
        <div class="glass p-4 rounded-lg mb-6">
          <h2 class="text-lg font-medium mb-4">სავაჭრო დაშბორდი</h2>
          
          <div class="space-y-4">
            <!-- Trading Configuration -->
            <div class="glass-inner p-3 rounded-md">
              <h3 class="text-md font-medium mb-2">კონფიგურაცია</h3>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <!-- Amount Input -->
                <div class="form-group">
                  <label for="trade-amount" class="text-gray-400 text-sm mb-1 block">სავაჭრო თანხა ($)</label>
                  <input type="number" id="trade-amount" class="form-input" value="100" min="1" step="1">
                </div>
                
                <!-- Min Profit -->
                <div class="form-group">
                  <label for="min-profit-percent" class="text-gray-400 text-sm mb-1 block">მინ. მოგება (%)</label>
                  <input type="number" id="min-profit-percent" class="form-input" value="1.0" min="0.1" step="0.1">
                </div>
                
                <!-- Max Trades per Hour -->
                <div class="form-group">
                  <label for="max-trades-hour" class="text-gray-400 text-sm mb-1 block">მაქს. ტრანზაქციები/საათში</label>
                  <input type="number" id="max-trades-hour" class="form-input" value="10" min="1" max="60" step="1">
                </div>
                
                <!-- Network Selection -->
                <div class="form-group">
                  <label class="text-gray-400 text-sm mb-1 block">ქსელი</label>
                  <div class="flex items-center">
                    <span class="mr-2 text-sm">ტესტნეტი</span>
                    <label class="switch">
                      <input type="checkbox" id="network-toggle">
                      <span class="slider round"></span>
                    </label>
                    <span class="ml-2 text-sm">მეინქსელი</span>
                  </div>
                </div>
                
                <!-- Auto Trade Toggle -->
                <div class="form-group">
                  <label class="text-gray-400 text-sm mb-1 block">ავტომატური ვაჭრობა</label>
                  <div class="flex items-center">
                    <label class="switch">
                      <input type="checkbox" id="auto-trade-toggle">
                      <span class="slider round"></span>
                    </label>
                    <span class="ml-2 text-sm">ავტომატურად ვაჭრობს საუკეთესო შესაძლებლობებზე</span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Trading Controls -->
            <div class="flex gap-3">
              <button id="start-trading-btn" class="btn-primary py-2 px-4">
                <i class="fas fa-play mr-2"></i> დაწყება
              </button>
              <button id="stop-trading-btn" class="btn-secondary py-2 px-4" disabled>
                <i class="fas fa-stop mr-2"></i> შეჩერება
              </button>
            </div>
            
            <!-- Trading Stats -->
            <div class="glass-inner p-3 rounded-md">
              <h3 class="text-md font-medium mb-2">სტატისტიკა</h3>
              
              <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                <div class="stat-item">
                  <div class="text-gray-400 text-sm">სტატუსი</div>
                  <div id="trading-status" class="status-inactive">გაჩერებული</div>
                </div>
                <div class="stat-item">
                  <div class="text-gray-400 text-sm">ჯამური მოგება</div>
                  <div id="total-profit" class="text-xl font-medium">$0.00</div>
                </div>
                <div class="stat-item">
                  <div class="text-gray-400 text-sm">ტრანზაქციების რ-ბა</div>
                  <div id="trades-count" class="text-xl font-medium">0</div>
                </div>
              </div>
            </div>
            
            <!-- Trade History -->
            <div class="glass-inner p-3 rounded-md">
              <h3 class="text-md font-medium mb-2">ტრანზაქციების ისტორია</h3>
              <div id="trade-history-container" class="trade-history">
                <div class="text-center text-gray-500 py-4">ჯერ არ არის ტრანზაქციები</div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Main Content -->
        <div class="dashboard-main">
          <!-- Arbitrage Opportunities Section -->
          <div class="glass p-4 rounded-lg mb-6">
            <h2 class="text-lg font-medium mb-2 flex justify-between">
              <span>Arbitrage Opportunities</span>
              <span class="text-sm">
                <span id="arbitrage-count">0</span> found
              </span>
            </h2>
            
            <!-- Loading State -->
            <div id="opportunities-loading" class="text-center py-4">
              <div class="loading-spinner"></div>
              <div class="mt-2 text-sm text-gray-400">Searching for arbitrage opportunities...</div>
            </div>
            
            <!-- Opportunities Container -->
            <div id="opportunities-container" class="space-y-3">
              <!-- Opportunities will be injected here by JS -->
            </div>
          </div>
          
          <!-- Advanced Arbitrage Section (Hidden by default) -->
          <div id="advanced-arbitrage-container" class="glass p-4 rounded-lg mb-6 hidden">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-medium">გაფართოებული არბიტრაჟი</h2>
              <button id="hide-advanced-arbitrage" class="btn-neo py-1 px-2 text-xs">დამალვა</button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4">
              <div id="advanced-arbitrage-opportunities">
                <!-- Advanced arbitrage opportunities will be inserted -->
              </div>
              
              <div id="liquidity-analysis">
                <!-- Liquidity analysis will be inserted -->
              </div>
              
              <div id="historical-analysis">
                <!-- Historical analysis will be inserted -->
              </div>
            </div>
          </div>
          
          <!-- Transaction History Section -->
          <div class="glass p-4 rounded-lg mb-6">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-medium">ბოლო ტრანზაქციები</h2>
              <button class="btn-neo py-1 px-2 text-xs" id="view-full-history">სრული ისტორია</button>
            </div>
            
            <div id="transaction-stats" class="glass p-3 rounded-lg mb-4">
              <!-- Transaction statistics will be inserted here by JavaScript -->
            </div>
            
            <table class="w-full">
              <thead>
                <tr>
                  <th>დრო</th>
                  <th>წყვილი</th>
                  <th>ტიპი</th>
                  <th>ზომა</th>
                  <th>მოგება</th>
                  <th>სტატუსი</th>
                </tr>
              </thead>
              <tbody id="transaction-table-body">
                <!-- Transaction data will be inserted here by JavaScript -->
              </tbody>
            </table>
            
            <div class="text-xs text-gray-400 mt-3 text-right">
              დააწკაპუნეთ ტრანზაქციაზე დეტალების სანახავად
            </div>
          </div>
          
          <!-- Broker Comparison Section -->
          <div class="glass p-4 rounded-lg mb-6">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-medium">საბროკეროების შედარება</h2>
              <div class="text-xs bg-indigo-500 bg-opacity-30 text-indigo-200 px-2 py-1 rounded">რეალური დროის ფასები</div>
            </div>
            
            <div class="mb-4">
              <div class="text-sm mb-2">საუკეთესო ყიდვა-გაყიდვის შესაძლებლობები</div>
              <select id="broker-token-pair" class="text-xs bg-gray-800 border border-gray-700 rounded px-2 py-1">
                <option value="SOL_USDC">SOL/USDC</option>
                <option value="SOL_USDT">SOL/USDT</option>
                <option value="BTC_USDC">BTC/USDC</option>
                <option value="ETH_USDC">ETH/USDC</option>
                <option value="JUP_USDC">JUP/USDC</option>
                <option value="SOL_BTC">SOL/BTC</option>
                <option value="SOL_ETH">SOL/ETH</option>
                <option value="RAY_USDC">RAY/USDC</option>
              </select>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <!-- Buy Side -->
              <div class="bg-gray-800 bg-opacity-50 rounded-lg p-3">
                <div class="text-sm font-medium text-green-400 mb-2">საუკეთესო ყიდვა:</div>
                <div id="best-buy-dex" class="text-lg font-bold">Jupiter</div>
                <div class="grid grid-cols-2 gap-2 text-sm mt-2">
                  <div>
                    <div class="text-gray-400">ფასი</div>
                    <div id="best-buy-price">120.45 USDC</div>
                  </div>
                  <div>
                    <div class="text-gray-400">საკომისიო</div>
                    <div id="best-buy-fee">0.03%</div>
                  </div>
                  <div>
                    <div class="text-gray-400">გაზის საფასური</div>
                    <div id="best-buy-gas">0.000005 SOL</div>
                  </div>
                  <div>
                    <div class="text-gray-400">მინ. შესვლა</div>
                    <div id="best-buy-min">0.01 SOL</div>
                  </div>
                </div>
              </div>
              
              <!-- Sell Side -->
              <div class="bg-gray-800 bg-opacity-50 rounded-lg p-3">
                <div class="text-sm font-medium text-red-400 mb-2">საუკეთესო გაყიდვა:</div>
                <div id="best-sell-dex" class="text-lg font-bold">Raydium</div>
                <div class="grid grid-cols-2 gap-2 text-sm mt-2">
                  <div>
                    <div class="text-gray-400">ფასი</div>
                    <div id="best-sell-price">120.52 USDC</div>
                  </div>
                  <div>
                    <div class="text-gray-400">საკომისიო</div>
                    <div id="best-sell-fee">0.25%</div>
                  </div>
                  <div>
                    <div class="text-gray-400">გაზის საფასური</div>
                    <div id="best-sell-gas">0.000004 SOL</div>
                  </div>
                  <div>
                    <div class="text-gray-400">გასვლის ბარიერი</div>
                    <div id="best-sell-min">0.1 SOL</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Arbitrage Opportunity Panel -->
            <div id="arbitrage-opportunity-panel" class="bg-gradient-to-r from-indigo-900 to-purple-900 rounded-lg p-4 mb-4">
              <div class="flex justify-between items-center mb-2">
                <div class="text-sm font-medium text-indigo-200">საუკეთესო არბიტრაჟის შესაძლებლობა:</div>
                <div class="text-sm text-white font-bold bg-indigo-500 bg-opacity-50 px-2 py-1 rounded" id="arb-profit-percent">+0.58%</div>
              </div>
              
              <div class="grid grid-cols-2 gap-4 text-sm">
                <div>
                  <div class="text-indigo-200">ყიდვა</div>
                  <div class="font-medium" id="arb-buy-dex">Jupiter</div>
                </div>
                <div>
                  <div class="text-indigo-200">გაყიდვა</div>
                  <div class="font-medium" id="arb-sell-dex">Raydium</div>
                </div>
                <div>
                  <div class="text-indigo-200">მინ. რაოდენობა</div>
                  <div class="font-medium" id="arb-min-amount">5.42 SOL</div>
                </div>
                <div>
                  <div class="text-indigo-200">საკომისიოს შემდეგ მოგება</div>
                  <div class="font-medium text-green-300" id="arb-net-profit">0.58%</div>
                </div>
              </div>
              
              <div class="mt-3">
                <button id="execute-arbitrage" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm transition">
                  შესრულება
                </button>
              </div>
            </div>
            
            <!-- Current Gas Status -->
            <div class="bg-gray-800 bg-opacity-30 rounded-lg p-3 flex justify-between items-center">
              <div>
                <div class="text-xs text-gray-400">გაზის მდგომარეობა</div>
                <div class="text-sm font-medium" id="gas-status">ნორმალური</div>
              </div>
              <div>
                <div class="text-xs text-gray-400">საშუალო დანაზოგი</div>
                <div class="text-sm font-medium text-green-400" id="avg-savings">0.42%</div>
              </div>
              <div>
                <div class="text-xs text-gray-400">ბოლო განახლება</div>
                <div class="text-sm" id="broker-last-update">30 წმ წინ</div>
              </div>
            </div>
          </div>
          
          <!-- Risk Management Section -->
          <div class="glass p-4 rounded-lg mb-6">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-medium">რისკის მართვა</h2>
              <div class="text-xs bg-blue-500 bg-opacity-30 text-blue-200 px-2 py-1 rounded">საუკეთესო პრაქტიკა</div>
            </div>
            
            <div class="mb-4">
              <div class="text-sm mb-2">საერთო რისკის დონე</div>
              <div class="risk-gauge">
                <div class="risk-gauge-fill" style="width: 45%"></div>
              </div>
              <div class="text-xs text-gray-400 mt-1">საშუალო - 45% მაქსიმალური რისკის</div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <div class="text-sm mb-2">მაქსიმალური ტრანზაქციის ზომა</div>
                <div class="flex items-center space-x-3">
                  <input type="range" min="1" max="50" value="15" class="risk-slider w-full">
                  <span class="parameter-value">15 SOL</span>
                </div>
              </div>
              
              <div>
                <div class="text-sm mb-2">გაზის ფასის ლიმიტი</div>
                <div class="flex items-center space-x-3">
                  <input type="range" min="10" max="100" value="35" class="risk-slider w-full">
                  <span class="parameter-value">35 Gwei</span>
                </div>
              </div>
              
              <div>
                <div class="text-sm mb-2">მინიმალური მოგების ზღვარი</div>
                <div class="flex items-center space-x-3">
                  <input type="range" min="0.1" max="5" step="0.1" value="0.5" class="risk-slider w-full">
                  <span class="parameter-value">0.5%</span>
                </div>
              </div>
              
              <div>
                <div class="text-sm mb-2">Stop-Loss ზღვარი</div>
                <div class="flex items-center space-x-3">
                  <input type="range" min="-10" max="-0.5" step="0.5" value="-3" class="risk-slider w-full">
                  <span class="parameter-value">-3%</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- System Log Section -->
          <div class="glass p-4 rounded-lg mb-6">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-medium">სისტემის ლოგი</h2>
              <div class="flex flex-col items-end">
                <div class="text-xs text-gray-400">ოპტიმიზებული ლოგირება: 10MB როტაცია / 1 კვირის შენახვა</div>
                <div class="text-xs text-green-400">ადრე არსებული 2400+ ლოგ-ფაილი წაშლილია</div>
              </div>
            </div>
            
            <div class="log-output">
              <div><span class="log-date">[2025-04-06 03:01:42]</span> <span class="log-success">INFO</span> - ტრანზაქცია შესრულდა: SOL → USDC, +0.18 SOL მოგება</div>
              <div><span class="log-date">[2025-04-06 03:01:39]</span> <span class="log-info">INFO</span> - დაიწყო ტრანზაქცია: SOL → USDC, 15 SOL, Jupiter</div>
              <div><span class="log-date">[2025-04-06 03:00:15]</span> <span class="log-info">INFO</span> - არბიტრაჟის შესაძლებლობა: SOL/USDC +1.03%, Jupiter → Raydium</div>
              <div><span class="log-date">[2025-04-06 02:58:42]</span> <span class="log-warning">WARN</span> - გაზის ფასი გაიზარდა: 28 → 31 Gwei</div>
              <div><span class="log-date">[2025-04-06 02:48:15]</span> <span class="log-success">INFO</span> - ტრანზაქცია შესრულდა: ETH → SOL, +0.21 SOL მოგება</div>
            </div>
            
            <div class="flex justify-end mt-3">
              <button class="btn-neo py-1 px-2 text-xs">სრული ლოგების ნახვა</button>
            </div>
          </div>
          
          <!-- Performance Monitoring Section -->
          <div class="glass p-4 rounded-lg mb-6">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-medium">სისტემის წარმადობა</h2>
              <div id="refresh-performance" class="text-xs cursor-pointer hover:text-blue-400">განახლება</div>
            </div>
            
            <div id="performance-report">
              <!-- Performance report will be inserted by analytics.js -->
            </div>
          </div>
          
          <!-- Market Analysis Section -->
          <div class="glass p-4 rounded-lg mb-6" id="market-analysis-container">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-medium">ბაზრის ანალიზი</h2>
              <div class="flex space-x-2">
                <button class="btn-neo py-1 px-2 text-xs" data-timeframe="24">დღე</button>
                <button class="btn-neo py-1 px-2 text-xs" data-timeframe="168">კვირა</button>
              </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div id="sol-analysis" class="market-token-analysis" data-token="SOL">
                <!-- SOL analysis inserted by analytics.js -->
              </div>
              <div id="sol-chart" class="market-token-chart" data-token="SOL">
                <!-- SOL chart inserted by analytics.js -->
              </div>
            </div>
            
            <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4">
              <div id="btc-analysis" class="market-token-analysis" data-token="BTC">
                <!-- BTC analysis inserted by analytics.js -->
              </div>
              <div id="eth-analysis" class="market-token-analysis" data-token="ETH">
                <!-- ETH analysis inserted by analytics.js -->
              </div>
              <div id="usdc-analysis" class="market-token-analysis" data-token="USDC">
                <!-- USDC analysis inserted by analytics.js -->
              </div>
              <div id="jup-analysis" class="market-token-analysis" data-token="JUP">
                <!-- JUP analysis inserted by analytics.js -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Footer with performance metrics -->
  <footer class="p-4 text-center text-xs text-gray-500">
    <div> 2025 Solana MEV Bot Dashboard - ყველა უფლება დაცულია</div>
    <div id="performance-metrics" class="mt-2">
      <div class="text-purple-400">ჩატვირთვის სისწრაფის ოპტიმიზაცია ჩართულია...</div>
    </div>
    <div class="text-purple-400 mt-1">ოპტიმიზებული ლოგირება: 10MB როტაცია, 1-კვირიანი შენახვა</div>
    <div class="text-green-400 mt-1">შესწორებულია: 2400+ ტაიმსტემპირებული ლოგ-ფაილი წაშლილია</div>
    <div class="text-blue-400 mt-2">
      <a href="https://github.com/mgebro24/solana-mev-dashboard" target="_blank" class="hover:underline">საწყისი კოდი GitHub-ზე</a>
    </div>
  </footer>
  
  <!-- Optimized JavaScript loading -->
  <!-- Primary scripts loaded in the header -->
  <script src="wallet-connect.js" defer></script>
  <script src="services.js" defer></script>
  <script src="jupiter-api.js" defer></script>
  <script src="arbitrage-ui.js" defer></script>
  <script src="trading-dashboard.js" defer></script>
  
  <!-- Performance and core scripts loaded first -->
  <script src="performance.js"></script>
  <script src="prices.js" defer></script>
  
  <!-- Secondary scripts loaded with defer -->
  <script src="database.js" defer></script>
  <script src="advanced-arbitrage.js" defer></script>
  <script src="transactions-engine.js" defer></script>
  
  <!-- New Broker Comparison Feature -->
  <script src="brokers.js" defer></script>
  <script src="broker-ui.js" defer></script>
  
  <!-- Add token API script BEFORE other scripts -->
  <script>
    // Top Solana tokens list - expanded to 20+ tokens
    const TOP_SOLANA_TOKENS = [
      { symbol: 'SOL', name: 'Solana', id: 'solana' },
      { symbol: 'USDC', name: 'USD Coin', id: 'usd-coin' },
      { symbol: 'USDT', name: 'Tether', id: 'tether' },
      { symbol: 'BTC', name: 'Bitcoin (Sollet)', id: 'bitcoin' },
      { symbol: 'ETH', name: 'Ethereum (Sollet)', id: 'ethereum' },
      { symbol: 'RAY', name: 'Raydium', id: 'raydium' },
      { symbol: 'SRM', name: 'Serum', id: 'serum' },
      { symbol: 'MNGO', name: 'Mango', id: 'mango-markets' },
      { symbol: 'STEP', name: 'Step Finance', id: 'step-finance' },
      { symbol: 'ATLAS', name: 'Star Atlas', id: 'star-atlas' },
      { symbol: 'POLIS', name: 'Star Atlas DAO', id: 'star-atlas-dao' },
      { symbol: 'ORCA', name: 'Orca', id: 'orca' },
      { symbol: 'FIDA', name: 'Bonfida', id: 'bonfida' },
      { symbol: 'COPE', name: 'Cope', id: 'cope' },
      { symbol: 'JUP', name: 'Jupiter', id: 'jupiter' },
      { symbol: 'SAMO', name: 'Samoyedcoin', id: 'samoyedcoin' },
      { symbol: 'BONK', name: 'Bonk', id: 'bonk' },
      { symbol: 'DFL', name: 'DeFi Land', id: 'defi-land' },
      { symbol: 'SLND', name: 'Solend', id: 'solend' },
      { symbol: 'MEAN', name: 'Mean DAO', id: 'mean-dao' },
      { symbol: 'DUST', name: 'Dust Protocol', id: 'dust-protocol' },
      { symbol: 'TULIP', name: 'Tulip Protocol', id: 'tulip-protocol' },
      { symbol: 'MSOL', name: 'Marinade staked SOL', id: 'marinade-staked-sol' },
      { symbol: 'STSOL', name: 'Lido Staked SOL', id: 'lido-staked-sol' },
      { symbol: 'JITO', name: 'Jito', id: 'jito' }
    ];
    
    // Real-time token prices update function
    async function fetchTokenPrices() {
      try {
        // Fetch prices from CoinGecko
        const tokens = TOP_SOLANA_TOKENS.map(t => t.id).join(',');
        const url = `https://api.coingecko.com/api/v3/simple/price?ids=${tokens}&vs_currencies=usd&include_24hr_change=true`;
        const response = await fetch(url);
        
        if (!response.ok) {
          throw new Error(`API error: ${response.status}`);
        }
        
        const data = await response.json();
        
        // Update prices table
        const pricesBody = document.getElementById('token-prices-body');
        if (!pricesBody) return;
        
        pricesBody.innerHTML = '';
        
        // Add tokens to table
        TOP_SOLANA_TOKENS.forEach(token => {
          if (data[token.id]) {
            const row = document.createElement('tr');
            row.className = 'border-b border-gray-800 hover:bg-gray-800/30';
            
            const price = data[token.id].usd;
            const change = data[token.id].usd_24h_change || 0;
            const changeClass = change >= 0 ? 'text-green-400' : 'text-red-400';
            
            row.innerHTML = `
              <td class="py-2">${token.symbol}</td>
              <td class="text-right py-2">$${price.toFixed(price < 0.01 ? 6 : 2)}</td>
              <td class="text-right py-2 ${changeClass}">
                ${change >= 0 ? '+' : ''}${change.toFixed(2)}%
              </td>
            `;
            
            pricesBody.appendChild(row);
          }
        });
        
        // Update last update time
        const timeEl = document.getElementById('last-update-time');
        if (timeEl) {
          timeEl.textContent = new Date().toLocaleTimeString();
        }
        
        console.log('Prices updated successfully');
        return data;
      } catch (error) {
        console.error('Error fetching prices:', error);
        const pricesBody = document.getElementById('token-prices-body');
        if (pricesBody) {
          pricesBody.innerHTML = `<tr><td colspan="3" class="text-center py-4 text-red-400">Error: ${error.message}</td></tr>`;
        }
      }
    }
    
    // Start regular updates
    document.addEventListener('DOMContentLoaded', function() {
      // Initial fetch
      fetchTokenPrices();
      
      // Set interval - every 2 seconds
      setInterval(fetchTokenPrices, 2000);
    });
  </script>
</body>
</html>
